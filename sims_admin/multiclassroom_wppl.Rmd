---
title: "Pareto efficiency analysis in RWebPPL"
author: "Larry Liu and Michael C. Frank"
date: "`r Sys.Date()`"
output: 
  html_document:
  toc: true
number_sections: true
---
  
```{r, echo = FALSE, include = FALSE}
rm(list=ls())
library(tidyverse)
library(rwebppl)
library(knitr)
opts_chunk$set(echo=FALSE, cache=TRUE, warning=FALSE, message = FALSE)
theme_set(theme_bw())
```

# Pipeline sanity check
```{r}
test_model <- "
var model = function() {
  console.log(\"Hello world\")
  return mathBeta.beta(3,5);
}
model();
"
webppl(test_model, packages = c("webppl/node_modules/webppl-beta"))

```

# Single student

```{r}
out <- as.data.frame(webppl(program_file = "webppl/scripts/bayesianTeacher.js", packages = c("webppl/node_modules/webppl-compute-digamma/", "webppl/node_modules/webppl-beta")))
```

Write the data to an intermediate caching csv for external/reproducibility use

```{r}
#write.csv(out, file='raw_data.csv')
write_csv(out, file=cat('raw_data_', as.character(Sys.Date()), '.csv', sep=''))
```

Load packages for simulations
```{r}
library('tidyverse')
library('ggplot2')
library('Rmisc')
```

Load data for simulations
```{r}
df <- read.csv(file = 'cached_data/raw_data.csv')
```
