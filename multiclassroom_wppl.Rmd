---
title: "Pareto efficiency analysis in RWebPPL"
author: "Larry Liu and Michael C. Frank"
date: "`r Sys.Date()`"
output: 
  html_document:
  toc: true
number_sections: true
---
  
```{r, echo = FALSE, include = FALSE}
rm(list=ls())
library(tidyverse)
library(rwebppl)
library(knitr)
opts_chunk$set(echo=FALSE, cache=TRUE, warning=FALSE, message = FALSE)
theme_set(theme_bw())
```

# Pipeline sanity check
```{r}
test_model <- "
var model = function() {
  //var a = IG2(1,2,2,4,1,2);
  //var b = IG2(1,2,2,4,2,1);
  //print(a);
  //print(b);
  //return a+b;
  return webpplBeta.beta(3,5);
}
model();
"
webppl(test_model, packages = c("webppl/node_modules/webppl-beta"))

```

# Single student

```{r}
out <- webppl(program_file = "webppl/scripts/bayesianTeacher.js", packages = c("webppl/node_modules/webppl-compute-digamma/"))
```

We select HMC as our inference method, revisit this. 

Plot output. 

```{r}
qplot(support, prob, data = out) + 
  xlim(c(0,1)) + 
  ylim(c(0,max(out$prob)))
```

# Single student with teacher

```{r}
out <- webppl(program_file = "webppl/single_student_with_teacher.js")
```

We select HMC as our inference method, revisit this. 

Plot output. 

```{r}
qplot(support, prob, data = out) + 
  xlim(c(0,1)) + 
  ylim(c(0,max(out$prob)))
```
